!function(){"use strict";window.htmlToElement=function(t){let e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild},window.replaceElement=function(t,e){t.parentNode.replaceChild(e,t)},window.AuxEvent=class{constructor(){this.event=document.createElement("e"),this.aux=new Event("e")}addListener(t,e){let a=this.event;a.addEventListener("e",(function n(){document.contains(t)?e():a.removeEventListener("e",n)}))}dispatch(){this.event.dispatchEvent(this.aux)}},window.Observable=class{constructor(t){this.variable=t,this.event=new AuxEvent}get value(){return this.variable}set value(t){this.variable=t,this.event.dispatch()}subscribe(t,e){this.event.addListener(t,e)}};let t=new Promise((t,e)=>{let a=new XMLHttpRequest;a.open("GET","data.json"),a.responseType="json",a.onload=()=>{a.status<400?t(a.response):e(a.statusText)},a.onerror=()=>e(a.statusText),a.send()});window.info=t.then(t=>t.info),window.sections=t.then(t=>t.sections),window.items=t.then(t=>t.items),window.filtersInfo=t.then(t=>t.filters),window.allergensInfo=t.then(t=>t.allergens),window.filters=t.then(t=>{let e=new Observable({});for(let a of t.filters)e.value[a.id]=!1;return e.set=function(t,a){e.value[t]=a,e.event.dispatch()},e}),window.allergens=t.then(t=>{let e=new Observable({});for(let a of Object.keys(t.allergens))e.value[a]=!1;return e.set=function(t,a){e.value[t]=a,e.event.dispatch()},e}),info.then(t=>document.title=t.name),window.check=new Observable(new Map),check.addItem=function(t,e=!0){let a=JSON.stringify({id:t,isFullSize:e}),n=check.value.get(a),i=n&&n+1||1;check.value.set(a,i),check.event.dispatch()},check.removeItem=function(t,e=!0){let a=JSON.stringify({id:t,isFullSize:e}),n=check.value.get(a),i=n&&n-1||0;check.value.set(a,i),check.event.dispatch()};const e="909322442:AAHZeTRrkhTA-6tL9cqwFqyKr3yDLdjbFsQ",a="166589969";async function n(t,i,s){let l=htmlToElement(`<div class="missing-img">\n\t\t<img class="item-big-img" src="images/items/${i.missing}">\n\t\t<div class="filter-foreground"></div>\n\t\t<div class="upload-div">\n\t\t\t<p class="upload-msg">Subiendo la imagen...</p>\n\t\t\t<article class="uploading-icon"><i class="fas fa-circle-notch fa-spin"></i></i></article>\n\t\t</div>\n\t</div>`);var c,r;s.replaceWith(l),(c=t.target.files[0],r=`${(await info).name} - ${i.name}`,new Promise((t,n)=>{let i=new FormData;i.append("photo",c);let s=new XMLHttpRequest;s.open("POST",`https://api.telegram.org/bot${e}/sendPhoto?chat_id=${a}&caption=${encodeURIComponent(r)}`),s.onload=()=>{s.status<400?t():n(s.statusText)},s.onerror=()=>n(s.statusText),s.send(i)})).then(()=>{l.replaceWith(htmlToElement(`<div class="missing-img">\n\t\t\t<img class="item-big-img" src="images/items/${i.missing}">\n\t\t\t<div class="filter-foreground"></div>\n\t\t\t<div class="upload-div">\n\t\t\t\t<p class="upload-msg">Foto enviada. ¡Gracias!</p>\n\t\t\t\t<article class="upload-icon"><i class="fas fa-check-circle"></i></article>\n\t\t\t</div>\n\t\t</div>`))}).catch(()=>{let t=htmlToElement(`<div class="missing-img">\n\t\t\t<img class="item-big-img" src="images/items/${i.missing}">\n\t\t\t<div class="filter-foreground"></div>\n\t\t\t<div class="upload-div">\n\t\t\t\t<p class="upload-msg">Error al subir la imagen</p>\n\t\t\t\t<article class="uploading-icon"><i class="fas fa-exclamation-triangle"></i></article>\n\t\t\t\t<label class="upload-input">\n\t\t\t\t\t<input type="file" accept="image/*">\n\t\t\t\t\t<span class="upload-mini-icon"><i class="fas fa-upload"></span></i>&nbsp&nbspSubir foto\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>`);t.onchange=e=>n(e,i,t),l.replaceWith(t)})}async function i(t,e=!0,a){let n=(await items)[t],i=n.prices&&e&&n.prices[1]||n.prices&&n.prices[0]||n.price,s=htmlToElement(`<article class="item">\n\t\t<a class="item-name" href="#/item/${t}">${n.name}</a>\n\t</article>`);return n.image&&(s.prepend(htmlToElement(`<img class="item-img" src="images/items/${n.image}">`)),s.querySelector(".item-img").onclick=()=>location.hash="/item/"+t),i&&(i=Number.isInteger(i)&&i.toString()||i.toFixed(2),s.appendChild(htmlToElement(`<div class="price-add">\n\t\t\t<p class="item-price">${i.replace(".",",")}€</p>\n\t\t\t<a><img class="add-item-img" src="images/add-item.png"></a>\n\t\t</div>`)),s.querySelector(".price-add").querySelector("a").onclick=()=>check.addItem(t,!n.prices||e)),e||n.prices||s.querySelector(".item-name").appendChild(htmlToElement(`<span class="only-fullsize">\n(solo ${a})</span>`)),s}async function s(t){let e=(await items)[t],a=(await filters).value,n=(await allergens).value;return a=Object.keys(a).filter(t=>a[t]),n=Object.keys(n).filter(t=>n[t]),a.every(t=>e.filters.includes(t))&&!n.some(t=>e.allergens.includes(t))}async function l(t){let e=(await items)[t],a=!0,i=htmlToElement(`<main>\n\t\t<div class="item-big-title">\n\t\t\t<p class="item-big-name">${e.name}</p>\n\t\t</div>\n\t\t<section class="item-description">\n\t\t\t<article class="big-price">\n\t\t\t\t<p class="big-price-text"></p>\n\t\t\t</article>\n\t\t\t<p>${e.description}</p>\n\t\t</section>\n\t</main>`);i.prepend(e.image&&htmlToElement(`<img class="item-big-img" src="images/items/${e.image}">`)||function(t){let e=htmlToElement(`<div class="missing-img">\n\t\t<img class="item-big-img" src="images/items/${t.missing}">\n\t\t<div class="filter-foreground"></div>\n\t\t<div class="upload-div">\n\t\t\t<p class="upload-msg">Imagen aún no disponible</p>\n\t\t\t<article class="upload-icon"><i class="fas fa-camera-retro"></i></article>\n\t\t\t<label class="upload-input">\n\t\t\t\t<input type="file" accept="image/*">\n\t\t\t\t<span class="upload-mini-icon"><i class="fas fa-upload"></span></i>&nbsp&nbspSubir foto\n\t\t\t</label>\n\t\t</div>\n\t</div>`);return e.querySelector("input").onchange=a=>n(a,t,e),e}(e)),(e.price||e.prices)&&(i.querySelector(".item-big-title").appendChild(htmlToElement('<a class="item-big-add"><i class="fas fa-plus-circle"></i></a>')),i.querySelector(".item-big-add").onclick=()=>check.addItem(t,a));let s=function(){let t=e.prices&&a&&e.prices[1]||e.prices&&e.prices[0]||e.price;t&&(t=Number.isInteger(t)&&t.toString()||t.toFixed(2),i.querySelector(".big-price-text").textContent=t.replace(".",",")+"€")};if(s(),e.prices){i.querySelector(".big-price").appendChild(htmlToElement(`<article class="switch-article">\n\t\t\t<div class="switch-labels">\n\t\t\t\t<p>${e.pricesNames[0]}</p>\n\t\t\t\t<p>${e.pricesNames[1]}</p>\n\t\t\t</div>\n\t\t\t<label class="filter-switch">\n\t\t\t\t<input type="checkbox" checked>\n\t\t\t\t<div class="filter-slider sizes-slider"></div>\n\t\t\t</label>\n\t\t</article>`));let t=i.querySelector("input[type=checkbox]");t.onclick=()=>{a=t.checked,s()}}return e.allergens.length&&i.appendChild(htmlToElement(`<a class="item-button" href="#/item/${t}/allergens">Información de alérgenos</a>`)),i}async function c(){let t=htmlToElement('<section class="filters">\n\t\t<div class="filters-content">\n\t\t\t<div class="filters-header">\n\t\t\t\t<a class="filters-close"><i class="fas fa-times"></i></a>\n\t\t\t\t<p class="filters-title">Filtros</p>\n\t\t\t</div>\n\t\t\t<div class="filters-body">\n\t\t\t\t<p class="filters-description">Requisitos dietéticos</p>\n\t\t\t</div>\n\t\t\t<a class="apply-filters">Aplicar filtros</a>\n\t\t</div>\n\t</section>');t.querySelector(".filters-close").onclick=()=>t.parentNode.removeChild(t),t.querySelector(".apply-filters").onclick=()=>t.parentNode.removeChild(t);let e=await window.filters,a=t.querySelector(".filters-body");for(let t of await filtersInfo){let n=htmlToElement(`<article class="filter">\n\t\t\t<label class="filter-info" for="filter-input-${t.name}">\n\t\t\t\t<p class="filter-title">${t.name}</p>\n\t\t\t\t<p class="filter-description">${t.description}</p>\n\t\t\t</label>\n\t\t\t<label class="filter-switch">\n\t\t\t\t<input id="filter-input-${t.name}" type="checkbox" ${e.value[t.id]?"checked":""}>\n\t\t\t\t<div class="filter-slider"></div>\n\t\t\t</label>\n\t\t</article>`),i=n.querySelector("input");i.onchange=()=>e.set(t.id,i.checked),a.appendChild(n)}let n=await window.allergens,i=await window.allergensInfo;for(let t of Object.keys(i)){let e=i[t],s=htmlToElement(`<article class="filter">\n\t\t\t<label class="filter-info" for="filter-input-${e.name}">\n\t\t\t\t<p class="filter-title">${e.name}</p>\n\t\t\t\t<p class="filter-description">${e.description}</p>\n\t\t\t</label>\n\t\t\t<label class="filter-switch">\n\t\t\t\t<input id="filter-input-${e.name}" type="checkbox" ${n.value[t]?"checked":""}>\n\t\t\t\t<div class="filter-slider"></div>\n\t\t\t</label>\n\t\t</article>`),l=s.querySelector("input");l.onchange=()=>n.set(t,l.checked),a.appendChild(s)}document.querySelector("main").appendChild(t)}async function r(){let t=htmlToElement('<a class="filters-button"><i class="fas fa-sliders-h"></i></a>');t.onclick=c;let e=await async function(){let t=(await filters).value,e=(await allergens).value;return Object.keys(t).filter(e=>t[e]).length+Object.keys(e).filter(t=>e[t]).length}();return e&&t.appendChild(htmlToElement(`<span class="count filters-count">${e}</span>`)),(await filters).subscribe(t,async()=>replaceElement(t,await r())),(await allergens).subscribe(t,async()=>replaceElement(t,await r())),t}async function o(t,e){let a=(await sections)[t],n=htmlToElement("<section></section>"),l=a.hasSizes&&a.hasSizes[2];for(let t of a.items)await s(t)&&n.appendChild(await i(t,e,l));return(await filters).subscribe(n,async()=>replaceElement(n,await o(t,e))),(await allergens).subscribe(n,async()=>replaceElement(n,await o(t,e))),n}async function m(){let t=await window.items,e=htmlToElement("<main></main>");for(let[a,n]of check.value)if(a=JSON.parse(a),n){let n=t[a.id],i=htmlToElement(`<div class="item-background">\n\t\t\t\t<article class="check-item">\n\t\t\t\t\t<img class="check-item-img" src="images/items/${n.image}">\n\t\t\t\t\t<div class="check-item-info">\n\t\t\t\t\t\t<div class="check-name-price">\n\t\t\t\t\t\t\t<a class="check-item-name" href="#/item/${a.id}">${n.name}</a>\n\t\t\t\t\t\t\t<span class="check-item-price"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span class="check-count-section">\n\t\t\t\t\t\t\t<a class="check-minus-button"><i class="fas fa-minus-circle"></i></a>\n\t\t\t\t\t\t\t<span class="check-item-count"></span>\n\t\t\t\t\t\t\t<a class="check-plus-button"><i class="fas fa-plus-circle"></i></a>\n\t\t\t\t\t\t\t<span class="check-count-margin"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</article>\n\t\t\t</div>`),s=function(){let t=check.value.get(JSON.stringify(a)),e=n.prices&&a.isFullSize&&n.prices[1]||n.prices&&n.prices[0]||n.price;e*=t,e=(e=Number.isInteger(e)&&e.toString()||e.toFixed(2)).replace(".",",")+"€",t?(i.querySelector(".check-item-count").textContent=t,i.querySelector(".check-item-price").textContent=e):i.parentNode.removeChild(i)};s(),i.querySelector(".check-minus-button").onclick=function(){check.removeItem(a.id,a.isFullSize),s()},i.querySelector(".check-plus-button").onclick=function(){check.addItem(a.id,a.isFullSize),s()},i.querySelector(".check-item-img").onclick=()=>location.hash="#/item/"+a.id,e.appendChild(i)}let a=htmlToElement('<p class="check-total"></p>'),n=async function(){a.textContent="Total a pagar: "+await async function(){let t=0,e=await window.items;for(let[a,n]of check.value){let i=e[(a=JSON.parse(a)).id];t+=(i.prices&&a.isFullSize&&i.prices[1]||i.prices&&i.prices[0]||i.price)*n}return t.toFixed(2).replace(".",",")+"€"}()};return n(),check.subscribe(a,n),e.appendChild(a),e.appendChild(htmlToElement('<div class="check-total-space"></div>')),e}replaceElement(document.querySelector(".count-parent"),function t(){let e=htmlToElement('<a class="count-parent" href="#/check"><i class="fas fa-concierge-bell"></i></a>'),a=function(){let t=0;for(let[e,a]of check.value)t+=a;return t}();return a&&e.appendChild(htmlToElement(`<span class="count">${a}</span>`)),check.subscribe(e,()=>replaceElement(e,t())),e}()),check.subscribe(document,()=>location.hash="/check");let p=new Observable("");function d(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}async function u(t){let e=d((await items)[t].name);return d(p.value).split(" ").every(t=>e.includes(t))}async function h(){let t=htmlToElement(`<main>\n\t\t<section class="search-section">\n\t\t\t<input class="search-input" type="search" placeholder="Buscar..." value="${p.value}">\n\t\t\t<span class="search-icon"><i class="fas fa-search"></i></span>\n\t\t</section>\n\t</main>`),e=t.querySelector("input");return e.oninput=()=>p.value=e.value,t.appendChild(await async function t(){let e=await window.items,a=htmlToElement("<section></section>");if(p.value)for(let t of Object.keys(e))await u(t)&&await s(t)&&a.appendChild(await i(t));return p.subscribe(a,async()=>replaceElement(a,await t())),(await filters).subscribe(a,async()=>replaceElement(a,await t())),(await allergens).subscribe(a,async()=>replaceElement(a,await t())),a}()),t}async function f(){scrollTo(0,0);let t,e=location.hash;(t=e.match(/#\/section\/([^/]+)$/))?(replaceElement(document.querySelector("header"),await async function(t){let e=(await sections)[t],a=htmlToElement(`<header>\n\t\t<a class="back-button" href="javascript:history.back()"><i class="fas fa-chevron-left"></i></a>\n\t\t<p class="title">${e.name}</p>\n\t</header>`);return a.appendChild(await r()),a}(t[1])),replaceElement(document.querySelector("main"),await async function(t){let e=(await sections)[t],a=htmlToElement("<main></main>");if(e.info&&a.appendChild(htmlToElement(`<p class="section-info">${e.info}</p>`)),e.hasSizes){a.appendChild(htmlToElement(`<section class="sizes-header">\n\t\t\t<p class="sizes-info">${e.hasSizes[0]}</p>\n\t\t\t<article class="switch-article">\n\t\t\t\t<div class="switch-labels">\n\t\t\t\t\t<p>${e.hasSizes[1]}</p>\n\t\t\t\t\t<p>${e.hasSizes[2]}</p>\n\t\t\t\t</div>\n\t\t\t\t<label class="filter-switch">\n\t\t\t\t\t<input type="checkbox" checked>\n\t\t\t\t\t<div class="filter-slider sizes-slider"></div>\n\t\t\t\t</label>\n\t\t\t</article>\n\t\t</section>`));let n=a.querySelector("input[type=checkbox]");n.onchange=async()=>replaceElement(a.lastChild,await o(t,n.checked))}return a.appendChild(await o(t,!0)),a}(t[1]))):(t=e.match(/#\/check$/))?(replaceElement(document.querySelector("header"),htmlToElement('<header>\n\t\t<a class="back-button" href="javascript:history.back()"><i class="fas fa-chevron-left"></i></a>\n\t\t<p class="title">Cuenta</p>\n\t</header>')),replaceElement(document.querySelector("main"),await m())):(t=e.match(/#\/item\/([^/]+)$/))?(replaceElement(document.querySelector("header"),await async function(t){let e=(await items)[t];return htmlToElement(`<header>\n\t\t<a class="back-button" href="javascript:history.back()"><i class="fas fa-chevron-left"></i></a>\n\t\t<p class="title">${e.name}</p>\n\t</header>`)}(t[1])),replaceElement(document.querySelector("main"),await l(t[1]))):(t=e.match(/#\/item\/([^/]+)\/allergens$/))?(replaceElement(document.querySelector("header"),htmlToElement('<header>\n\t\t<a class="back-button" href="javascript:history.back()"><i class="fas fa-chevron-left"></i></a>\n\t\t<p class="title">Alérgenos</p>\n\t</header>')),replaceElement(document.querySelector("main"),await async function(t){let e=(await items)[t],a=await window.allergensInfo,n=htmlToElement(`<main>\n\t\t<a class="allergens-item-name" href="#/item/${t}">${e.name}</a>\n\t\t<p class="allergens-title">ALÉRGENOS\n\t\tCONTENIDOS EN ESTE PRODUCTO</p>\n\t\t<section class="allergens-icons"></section>\n\t\t<p class="allergens-details-title">DETALLES DE LOS ALÉRGENOS</p>\n\t\t<p class="allergens-details">Toda la información sobre alérgenos está basada en datos suministrados por nuestros proveedores. Además de los alérgenos señalados, no se puede excluir totalmente la posible presencia accidental de otros alérgenos durante los procesos de elaboración tanto en la fábrica como en el restaurante. Excepcionalmente y de forma temporal puede haber variaciones en la composición de un determinado producto y por tanto los datos pueden no coincidir con los aquí facilitados.\n\t\t\n\t\t${(await info).name} tiene a su disposición la lista de alérgenos de nuestros productos. Solicítela en el mostrador.</p>\n\t</main>`),i=n.querySelector(".allergens-icons");for(let t of e.allergens)i.appendChild(htmlToElement(`<img src="images/allergens/${a[t].image}">`));return n}(t[1]))):(t=e.match(/#\/search$/))?(replaceElement(document.querySelector("header"),await async function(){let t=htmlToElement('<header>\n\t\t<a class="back-button" href="javascript:history.back()"><i class="fas fa-chevron-left"></i></a>\n\t\t<p class="title">Búsqueda</p>\n\t</header>');return t.appendChild(await r()),t}()),replaceElement(document.querySelector("main"),await h())):(t=e.match(/#\/others$/))?(replaceElement(document.querySelector("header"),htmlToElement('<header>\n\t\t<a class="back-button" href="javascript:history.back()"><i class="fas fa-chevron-left"></i></a>\n\t\t<p class="title">The Menu</p>\n\t</header>')),replaceElement(document.querySelector("main"),htmlToElement('<main>\n\t\t<section>\n\t\t\t<a class="other-section" href="#/hours">\n\t\t\t\t<span>Horarios</span>\n\t\t\t\t<i class="fas fa-angle-right fa-xs"></i>\n\t\t\t</a>\n\t\t\t<a class="other-section" href="#/about-us">\n\t\t\t\t<span>Sobre nosotros</span>\n\t\t\t\t<i class="fas fa-angle-right fa-xs"></i>\n\t\t\t</a>\n\t\t</section>\n\t</main>'))):(t=e.match(/#\/hours$/))?(replaceElement(document.querySelector("header"),htmlToElement('<header>\n\t\t<a class="back-button" href="javascript:history.back()"><i class="fas fa-chevron-left"></i></a>\n\t\t<p class="title">Horarios</p>\n\t</header>')),replaceElement(document.querySelector("main"),await async function(){let t=await window.info,e=htmlToElement(`<main>\n\t\t<p class="hours-bar-name">${t.name}</p>\n\t\t<section class="main-hours">\n\t\t\t<img class="hours-img" src="images/utensils.svg">\n\t\t\t<p class="hours-title">Horario</p>\n\t\t\t<p class="hours-info">${t.hours}</p>\n\t\t</section>\n\t</main>`);return t.hoursDetails&&e.appendChild(htmlToElement(`<p class="hours-details">${t.hoursDetails}</p>`)),e}())):(t=e.match(/#\/about-us$/))?(replaceElement(document.querySelector("header"),htmlToElement('<header>\n\t\t<a class="back-button" href="javascript:history.back()"><i class="fas fa-chevron-left"></i></a>\n\t\t<p class="title">Sobre nosotros</p>\n\t</header>')),replaceElement(document.querySelector("main"),htmlToElement('<main>\n\t\t<p class="about-us">En LD Graphics sabemos que aprovechar la tecnología es clave para ser más eficiente en tu negocio. Por eso hemos formado un equipo especializado en desarrollo de aplicaciones a medida.\n\n\t\tNos esforzamos para darle al cliente exactamente lo quiere, siendo la comunicación gran parte de nuestro riguroso proceso de trabajo. Nos comprometemos a dar lo mejor que tenemos, desde la atención al cliente hasta el diseño y desarrollo del producto.\n\t\t\n\t\tEstaremos encantados de atenderles en <a href="mailto:LDGraphicsSL@gmail.com">LDGraphicsSL@gmail.com</a></p>\n\t</main>'))):(replaceElement(document.querySelector("header"),htmlToElement('<header>\n\t\t<p class="title">Nuestra carta</p>\n\t</header>')),replaceElement(document.querySelector("main"),await async function(){let t=await window.info,e=htmlToElement(`<main>\n\t\t<img class="main-img" src="images/items/${t.image}">\n\t\t<div class="home">\n\t\t\t<p class="bar-name">${t.name}</p>\n\t\t\t<p class="bar-address">${t.address}</p>\n\t\t\t<section class="section-list">\n\t\t\t</section>\n\t\t</div>\n\t</main>`),a=await window.sections,n=e.querySelector(".section-list");for(let t of Object.keys(a)){let e=a[t];e.hidden||n.appendChild(htmlToElement(`<a class="section-article" href="#/section/${t}">\n\t\t\t\t<img class="section-img" src="images/items/${e.image}">\n\t\t\t\t<span class="section-name"><p>${e.name}</p></span>\n\t\t\t</a>`))}return e}()))}window.onpopstate=f,f()}();
